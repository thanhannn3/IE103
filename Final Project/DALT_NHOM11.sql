CREATE DATABASE QL_HSBA
GO
USE QL_HSBA

CREATE TABLE HoSoBenhAn (
	MSBA CHAR(6) PRIMARY KEY,
	HoTen NVARCHAR(50),
	NgSinh SMALLDATETIME,
	DiaChi NVARCHAR(100),
	SoDT VARCHAR(10),
	NgayLapHS SMALLDATETIME
);
CREATE TABLE VienPhi (
	MSVP CHAR(5) PRIMARY KEY,
	MSBA CHAR(6),
	NgayVP SMALLDATETIME,
	SoTien BIGINT,
);
CREATE TABLE PhieuDangKiKhamBenh (
	MSPDK CHAR(4) PRIMARY KEY,
	MSBA CHAR(6),
	MSPhong CHAR(4)
);
CREATE TABLE HoSoDieuTriNoiTru (
	MSDTNT CHAR(4) PRIMARY KEY,
	MSBA CHAR(6),
	MSPhong CHAR(4),
	NgayNV SMALLDATETIME,
	NgayXV SMALLDATETIME
);
CREATE TABLE PhieuXetNghiem (
	MSXN CHAR(6) PRIMARY KEY,
	MSBA CHAR(6),
	LoaiXN NVARCHAR(50),
	NgayXN SMALLDATETIME,
	KQXN NVARCHAR(50)
);
CREATE TABLE PhieuKhamBenh (
	MSPKB CHAR(6) PRIMARY KEY,
	MSBA CHAR(6),
	NgayKham SMALLDATETIME,
);

CREATE TABLE Benh (
	MSBenh CHAR(4) PRIMARY KEY,
	TenBenh NVARCHAR(100),
	TrieuChung NVARCHAR(100)
);

CREATE TABLE ChiTietPKB (
    MSPKB CHAR(6),
    MSBenh CHAR(4),
    MSBS CHAR(6),
    ChuanDoan NVARCHAR(100),
    PRIMARY KEY (MSPKB, MSBenh)
);

CREATE TABLE BacSi (
	MSBS CHAR(6) PRIMARY KEY,
	HoTen NVARCHAR(50),
	GioiTinh NVARCHAR(10),
	DiaChi NVARCHAR(100),
	SoDT VARCHAR(10),
	MSKhoa CHAR(6),
	BSCK NVARCHAR(50)
);

CREATE TABLE Khoa (
	MSKhoa CHAR(6) PRIMARY KEY,
	TenKhoa NVARCHAR(50)
);

--Khóa ngoại viện phí
ALTER TABLE VienPhi ADD
CONSTRAINT FK_HSBA_VP FOREIGN KEY(MSBA) REFERENCES HoSoBenhAn(MSBA);
--KHÓA NGOẠI PHIẾU ÐANG KÍ KHÁM B?NH
ALTER TABLE PhieuDangKiKhamBenh ADD
CONSTRAINT FK_HSBA_DKPT FOREIGN KEY(MSBA) REFERENCES HoSoBenhAn(MSBA);
--KHÓA NGO?I HỒ SƠ DIEU TRI NOI TRU
ALTER TABLE HoSoDieuTriNoiTru ADD
CONSTRAINT FK_HSBA_DTNT FOREIGN KEY(MSBA) REFERENCES HoSoBenhAn(MSBA);
--KHÓA NGO?I PHIEU XET NGHIEM
ALTER TABLE PhieuXetNghiem ADD
CONSTRAINT FK_HSBA_XN FOREIGN KEY(MSBA) REFERENCES HoSoBenhAn(MSBA);
--KHÓA NGOAI PHE?U KHÁM BENH
ALTER TABLE PhieuKhamBenh ADD
CONSTRAINT FK_HSBA_PKN FOREIGN KEY(MSBA) REFERENCES HoSoBenhAn(MSBA);
--KHÓA NGOAI CHI TIET PHIEU KHÁM BENH
ALTER TABLE ChiTietPKB ADD
CONSTRAINT FK_CTPKB_BS FOREIGN KEY(MSBS) REFERENCES BacSi(MSBS),
CONSTRAINT FK_CTPKB_PKB FOREIGN KEY(MSPKB) REFERENCES PhieuKhamBenh(MSPKB),
CONSTRAINT FK_CTPKB_B FOREIGN KEY(MSBenh) REFERENCES Benh(MSBenh);
--KHÓA NGO?I BÁC SI
ALTER TABLE BacSi ADD
CONSTRAINT FK_BS_KHOA FOREIGN KEY(MSKhoa) REFERENCES Khoa(MSKhoa);

SET DATEFORMAT YMD
INSERT INTO HoSoBenhAn VALUES('BA5780', N'Nguyễn Văn An', '1994-11-20', N'Hồ Chí Minh', '0853140919', '2022-07-22')
INSERT INTO HoSoBenhAn VALUES('BA2979', N'Cao Vũ Hoàng', '1997-10-17', N'Cần Thơ', '0422122825', '2017-03-19')
INSERT INTO HoSoBenhAn VALUES('BA8821', N'Trần Đình Trung', '2008-11-01', N'Thủ Dầu Một', '0389156816', '2022-08-18')
INSERT INTO HoSoBenhAn VALUES('BA2015', N'Võ Nguyễn Yến Nhi', '2000-08-21', N'Cần Thơ', '0619420783', '2011-09-18')
INSERT INTO HoSoBenhAn VALUES('BA4660', N'Nguyễn Văn Mười', '2011-03-18', N'Hồ Chí Minh', '0669398574', '2018-10-07')
INSERT INTO HoSoBenhAn VALUES('BA3689', N'Cơ Thiếu Hoàng', '2003-09-09', N'Thủ Đức', '0139051056', '2007-09-04')
INSERT INTO HoSoBenhAn VALUES('BA1474', N'Vũ Thu An', '2005-12-09', N'Đà Nẵng', '0395470106', '2010-01-30')
INSERT INTO HoSoBenhAn VALUES('BA8133', N'Trần Bá', '1990-01-29', N'Thủ Đức', '0833275878', '1999-03-05')
INSERT INTO HoSoBenhAn VALUES('BA5595', N'Nguyễn Nhật Tân', '1997-04-06', N'Đà Nẵng', '0400331966', '2000-08-22')
INSERT INTO HoSoBenhAn VALUES('BA9471', N'Cao Văn Ngọc', '2009-06-05', N'Đà Nẵng', '0116144294', '2011-08-07')
INSERT INTO HoSoBenhAn VALUES('BA7192', N'Hoàng Ngọc Trụ', '2009-04-21', N'Cần Thơ', '0975528591', '2021-03-08')
INSERT INTO HoSoBenhAn VALUES('BA2510', N'Đặng Huy Tường', '1993-09-24', N'Cần Thơ', '0722376915', '2019-08-05')
INSERT INTO HoSoBenhAn VALUES('BA7144', N'Trần Đăng Khôi', '2004-10-04', N'Đà Nẵng', '0864608909', '2019-02-23')
INSERT INTO HoSoBenhAn VALUES('BA7110', N'Lê Ðình Toàn', '2000-03-01', N'Thủ Đức', '0909306848', '2005-02-16')
INSERT INTO HoSoBenhAn VALUES('BA6749', N'Phạm Mai Ngọc Lan', '2007-04-03', N'Cần Thơ', '0327355998', '2019-01-13')
INSERT INTO HoSoBenhAn VALUES('BA6424', N'Hoàng Ðức Kiên', '1990-07-31', N'Đà Nẵng', '0107145473', '2021-01-11')
INSERT INTO HoSoBenhAn VALUES('BA8918', N'Hoàng Nhật Tiến', '1992-06-08', N'Hồ Chí Minh', '0562703773', '2021-02-02')
INSERT INTO HoSoBenhAn VALUES('BA4690', N'Hồ Huy Tường', '2011-01-10', N'Đà Nẵng', '0122328374', '2020-04-19')
INSERT INTO HoSoBenhAn VALUES('BA8233', N'Phan Ðạt Hòa', '1996-05-22', N'Thủ Đức', '0224451349', '2020-11-28')
INSERT INTO HoSoBenhAn VALUES('BA3363', N'Ngô Nguyên Giáp', '1998-03-27', N'Hồ Chí Minh', '0684813995', '2019-12-07')
INSERT INTO HoSoBenhAn VALUES('BA6793', N'Ngô Việt Hương', '2000-01-12', N'Thủ Dầu Một', '0654527841', '2019-09-11')
INSERT INTO HoSoBenhAn VALUES('BA8877', N'Đỗ Minh Nghĩa', '1999-01-21', N'Cần Thơ', '0244946046', '2000-06-13')
INSERT INTO HoSoBenhAn VALUES('BA6788', N'Bùi Nghĩa Hòa', '2006-12-10', N'Đà Nẵng', '0308750487', '2020-04-09')
INSERT INTO HoSoBenhAn VALUES('BA4510', N'Phan Linh Lan', '1990-11-01', N'Hồ Chí Minh', '0190999524', '2022-05-17')
INSERT INTO HoSoBenhAn VALUES('BA3762', N'Bùi Bảo Hòa', '2011-12-14', N'Thủ Dầu Một', '0515583538', '2014-04-24')
INSERT INTO HoSoBenhAn VALUES('BA9110', N'Lê Phi Hùng', '1996-10-21', N'Đà Nẵng', '0436198934', '2022-05-26')
INSERT INTO HoSoBenhAn VALUES('BA7227', N'Phan Xuân Cao', '2010-02-13', N'Thủ Dầu Một', '0463166734', '2022-10-12')
INSERT INTO HoSoBenhAn VALUES('BA4294', N'Đặng Đức Hoà', '1996-03-21', N'Hồ Chí Minh', '0111575366', '2019-02-06')
INSERT INTO HoSoBenhAn VALUES('BA5055', N'Ngô Thanh Hào', '2011-03-02', N'Thủ Dầu Một', '0348682203', '2022-05-24')
INSERT INTO HoSoBenhAn VALUES('BA7098', N'Bùi Xuân Hương', '1999-02-20', N'Cần Thơ', '0832593420', '2021-03-14')
INSERT INTO HoSoBenhAn VALUES('BA7327', N'Phan Anh Sơn', '1993-03-23', N'Cần Thơ', '0577698321', '2022-02-20')
INSERT INTO HoSoBenhAn VALUES('BA5688', N'Ngô Khắc Ninh', '1999-11-21', N'Đà Nẵng', '0296244292', '2022-12-05')
INSERT INTO HoSoBenhAn VALUES('BA9173', N'Lý Ngọc Quang', '2004-06-15', N'Thủ Đức', '0295063385', '2021-06-20')
INSERT INTO HoSoBenhAn VALUES('BA7573', N'Lê Hữu Ðịnh', '1995-01-31', N'Hồ Chí Minh', '0940063886', '2019-08-25')
INSERT INTO HoSoBenhAn VALUES('BA1925', N'Hồ Nam Anh', '2009-11-07', N'Đà Nẵng', '0573637275', '2020-05-08')
INSERT INTO HoSoBenhAn VALUES('BA9874', N'Lý Anh Khải', '2005-01-23', N'Thủ Dầu Một', '0194796610', '2020-12-08')
INSERT INTO HoSoBenhAn VALUES('BA2277', N'Bùi Nguyên Phong', '2003-11-28', N'Hồ Chí Minh', '0472944207', '2022-09-12')
INSERT INTO HoSoBenhAn VALUES('BA7044', N'Nguyễn Quốc Thịnh', '2008-01-26', N'Thủ Dầu Một', '0994238245', '2019-06-25')
INSERT INTO HoSoBenhAn VALUES('BA4440', N'Nguyễn Hữu Hạnh', '2006-02-12', N'Thủ Đức', '0335914749', '2019-03-04')
INSERT INTO HoSoBenhAn VALUES('BA9715', N'Đỗ Ðình Trung', '2011-12-17', N'Cần Thơ', '0746506147', '2021-10-17')
INSERT INTO HoSoBenhAn VALUES('BA7350', N'Hoàng Thiện Ân', '2011-09-03', N'Đà Nẵng', '0844430927', '2022-02-02')
INSERT INTO HoSoBenhAn VALUES('BA4421', N'Lý Thụy Long', '2007-09-08', N'Hồ Chí Minh', '0269432067', '2021-12-04')
INSERT INTO HoSoBenhAn VALUES('BA1318', N'Trần Tuyết Mai', '2007-10-18', N'Thủ Dầu Một', '0843108388', '2020-08-27')
INSERT INTO HoSoBenhAn VALUES('BA6036', N'Bùi Nhật Tấn', '1992-05-30', N'Cần Thơ', '0785356237', '2020-12-21')
INSERT INTO HoSoBenhAn VALUES('BA1866', N'Bùi Minh Đăng', '1995-09-10', N'Hồ Chí Minh', '0243302297', '2022-07-28')
INSERT INTO HoSoBenhAn VALUES('BA1544', N'Trần Mạnh Cường', '2003-11-17', N'Đà Nẵng', '0607121125', '2006-01-08')
INSERT INTO HoSoBenhAn VALUES('BA1139', N'Lý Thanh Uyên', '2002-03-27', N'Thủ Dầu Một', '0144859377', '2020-08-27')
INSERT INTO HoSoBenhAn VALUES('BA5591', N'Nguyễn Bảo Lâm', '1991-12-20', N'Hồ Chí Minh', '0647009173', '2019-06-27')
INSERT INTO HoSoBenhAn VALUES('BA1695', N'Võ Chấn Hùng', '1994-01-12', N'Thủ Đức', '0511419522', '2019-01-01')
INSERT INTO HoSoBenhAn VALUES('BA4706', N'Đặng Tuệ Lâm', '2000-09-30', N'Đà Nẵng', '0357376264', '2021-07-23')
INSERT INTO HoSoBenhAn VALUES('BA2096', N'Hồ Nhật Quốc', '1993-08-05', N'Hồ Chí Minh', '0161480111', '2022-09-09')
INSERT INTO HoSoBenhAn VALUES('BA7117', N'Nguyễn Đăng Quang', '2007-08-11', N'Thủ Dầu Một', '0455864145', '2020-06-23')
INSERT INTO HoSoBenhAn VALUES('BA6052', N'Trần Bảo Tiên', '2010-01-06', N'Thủ Đức', '0154483119', '2022-10-06')
INSERT INTO HoSoBenhAn VALUES('BA5372', N'Trần Xuân Cao', '2008-05-01', N'Đà Nẵng', '0601409996', '2020-11-21')
INSERT INTO HoSoBenhAn VALUES('BA1957', N'Phạm Ðức Bằng', '1995-11-17', N'Hồ Chí Minh', '0363332607', '2019-05-12')
INSERT INTO HoSoBenhAn VALUES('BA8982', N'Phạm Trọng Tấn', '2000-06-30', N'Cần Thơ', '0439543697', '2021-09-24')
INSERT INTO HoSoBenhAn VALUES('BA4000', N'Đặng Thảo Uyên', '2001-12-18', N'Thủ Dầu Một', '0683852051', '2019-12-27')
INSERT INTO HoSoBenhAn VALUES('BA2134', N'Phạm Ðình Lộc', '2006-01-08', N'Thủ Đức', '0275545963', '2020-06-11')
INSERT INTO HoSoBenhAn VALUES('BA1965', N'Võ Thu Liên', '1992-10-19', N'Hồ Chí Minh', '0417925646', '2020-05-06')
INSERT INTO HoSoBenhAn VALUES('BA1257', N'Đỗ Tấn Sinh', '2008-04-29', N'Thủ Dầu Một', '0830466220', '2021-08-25')
INSERT INTO HoSoBenhAn VALUES('BA4143', N'Võ Quang Bảo', '2007-07-21', N'Cần Thơ', '0923494440', '2021-05-27')
INSERT INTO HoSoBenhAn VALUES('BA1031', N'Phan Ngọc Quyết', '2001-01-20', N'Đà Nẵng', '0185447909', '2022-07-02')
INSERT INTO HoSoBenhAn VALUES('BA9816', N'Đỗ Khánh Duy', '2005-05-12', N'Thủ Dầu Một', '0743364553', '2022-09-09')
INSERT INTO HoSoBenhAn VALUES('BA8830', N'Lê Ðức Tuệ', '2011-06-28', N'Cần Thơ', '0493257519', '2022-09-09')
INSERT INTO HoSoBenhAn VALUES('BA6430', N'Hoàng Gia Khánh', '2004-02-21', N'Hồ Chí Minh', '0543737004', '2020-09-13')
INSERT INTO HoSoBenhAn VALUES('BA3554', N'Hồ Tú Linh', '2009-06-01', N'Thủ Dầu Một', '0665408339', '2020-12-13')
INSERT INTO HoSoBenhAn VALUES('BA9469', N'Lê Trung Nhân', '1992-01-12', N'Thủ Đức', '0206982776', '2020-09-10')
INSERT INTO HoSoBenhAn VALUES('BA2873', N'Trần Thảo Mai', '1997-06-02', N'Đà Nẵng', '0121233946', '2019-11-19')
INSERT INTO HoSoBenhAn VALUES('BA9749', N'Võ Quang Triệu', '2003-02-11', N'Thủ Dầu Một', '0375029242', '2022-10-28')
INSERT INTO HoSoBenhAn VALUES('BA1832', N'Lê Kiên Cường', '2003-04-19', N'Đà Nẵng', '0441713445', '2019-01-16')
INSERT INTO HoSoBenhAn VALUES('BA9584', N'Hồ Nam Sơn', '1997-09-02', N'Thủ Dầu Một', '0256359805', '2021-10-23')
INSERT INTO HoSoBenhAn VALUES('BA2601', N'Phạm Trà Giang', '2009-04-21', N'Thủ Dầu Một', '0480449154', '2019-12-13')
INSERT INTO HoSoBenhAn VALUES('BA3836', N'Ngô Tấn Dũng', '1996-05-03', N'Hồ Chí Minh', '0992387004', '2019-04-12')
INSERT INTO HoSoBenhAn VALUES('BA3605', N'Đỗ Tuấn Hoàng', '2005-09-18', N'Thủ Đức', '0858806590', '2020-10-20')
INSERT INTO HoSoBenhAn VALUES('BA1092', N'Lý Danh Thành', '2003-09-24', N'Đà Nẵng', '0766338521', '2020-09-16')
INSERT INTO HoSoBenhAn VALUES('BA6932', N'Đỗ Hữu Bình', '2010-03-02', N'Thủ Dầu Một', '0233524475', '2020-10-29')
INSERT INTO HoSoBenhAn VALUES('BA4198', N'Võ Duy Tâm', '2007-06-23', N'Đà Nẵng', '0783992197', '2019-11-11')
INSERT INTO HoSoBenhAn VALUES('BA6753', N'Bùi Danh Văn', '1990-11-26', N'Cần Thơ', '0389449588', '2020-04-09')
INSERT INTO HoSoBenhAn VALUES('BA9770', N'Nguyễn Trà My', '2001-01-09', N'Thủ Đức', '0928413609', '2019-11-13')
INSERT INTO HoSoBenhAn VALUES('BA9687', N'Hồ Công Luận', '2005-02-16', N'Đà Nẵng', '0751395702', '2022-02-24')
INSERT INTO HoSoBenhAn VALUES('BA4745', N'Nguyễn Thiên Ân', '2001-10-03', N'Thủ Dầu Một', '0196549577', '2021-08-24')
INSERT INTO HoSoBenhAn VALUES('BA7781', N'Đặng Trọng Kim', '2010-03-02', N'Hồ Chí Minh', '0389945822', '2022-07-11')
INSERT INTO HoSoBenhAn VALUES('BA1465', N'Trần Gia Hưng', '2009-08-10', N'Thủ Dầu Một', '0385935936', '2020-08-18')
INSERT INTO HoSoBenhAn VALUES('BA8285', N'Lý Diễm Phương', '2005-02-03', N'Cần Thơ', '0302931345', '2021-10-28')
INSERT INTO HoSoBenhAn VALUES('BA1644', N'Phan Phúc Khang', '2002-02-18', N'Thủ Đức', '0170487646', '2021-05-01')
INSERT INTO HoSoBenhAn VALUES('BA2132', N'Trần Ðức Thành', '2006-10-28', N'Thủ Dầu Một', '0192293333', '2022-09-20')
INSERT INTO HoSoBenhAn VALUES('BA7338', N'Đỗ Hiếu Dụng', '1998-05-31', N'Cần Thơ', '0989568347', '2022-02-14')
INSERT INTO HoSoBenhAn VALUES('BA9096', N'Lý Thảo My', '2010-12-31', N'Thủ Dầu Một', '0916102592', '2020-04-24')
INSERT INTO HoSoBenhAn VALUES('BA3265', N'Đặng Hùng Dũng', '1996-11-28', N'Hồ Chí Minh', '0629185634', '2021-02-16')
INSERT INTO HoSoBenhAn VALUES('BA1143', N'Đặng Quốc Hùng', '1994-12-05', N'Thủ Đức', '0616614583', '2020-12-01')
INSERT INTO HoSoBenhAn VALUES('BA1102', N'Lê Duy Hoàng', '2011-10-19', N'Thủ Đức', '0630236198', '2022-04-01')
INSERT INTO HoSoBenhAn VALUES('BA3236', N'Trần Ngọc Lam', '2000-05-02', N'Thủ Dầu Một', '0802278791', '2020-11-04')
INSERT INTO HoSoBenhAn VALUES('BA8276', N'Bùi Quang Bửu', '2009-12-08', N'Đà Nẵng', '0477358186', '2021-04-11')
INSERT INTO HoSoBenhAn VALUES('BA1831', N'Ngô Thái Bình', '2005-08-19', N'Cần Thơ', '0763969046', '2020-10-21')
INSERT INTO HoSoBenhAn VALUES('BA6225', N'Phạm Bảo Anh', '1991-11-09', N'Thủ Đức', '0286511790', '2022-12-10')
INSERT INTO HoSoBenhAn VALUES('BA4475', N'Đỗ Quỳnh Thơ', '2003-09-26', N'Hồ Chí Minh', '0155164405', '2020-01-15')
INSERT INTO HoSoBenhAn VALUES('BA2108', N'Lê Phước Lộc', '1997-08-20', N'Đà Nẵng', '0454710165', '2020-05-03')
INSERT INTO HoSoBenhAn VALUES('BA3868', N'Ngô Phi Hoàng', '1995-10-19', N'Cần Thơ', '0701037153', '2020-06-19')
INSERT INTO HoSoBenhAn VALUES('BA5975', N'Phạm Xuyến Chi', '2010-05-06', N'Thủ Dầu Một', '0467098739', '2019-09-06')
INSERT INTO HoSoBenhAn VALUES('BA6592', N'Phan Huy Hà', '2000-12-01', N'Hồ Chí Minh', '0253136959', '2021-12-05')

INSERT INTO VienPhi VALUES('VP221', 'BA5780', '2022-08-22', 1000000)
INSERT INTO VienPhi VALUES('VP841', 'BA2979', '2017-03-21', 37000000)
INSERT INTO VienPhi VALUES('VP971', 'BA8821', '2022-08-20', 35000000)
INSERT INTO VienPhi VALUES('VP301', 'BA2015', '2011-09-18', 500000)
INSERT INTO VienPhi VALUES('VP101', 'BA4660', '2018-10-14', 32000000)
INSERT INTO VienPhi VALUES('VP191', 'BA3689', '2007-09-27', 35450000)
INSERT INTO VienPhi VALUES('VP911', 'BA1474', '2010-02-02', 2000000)
INSERT INTO VienPhi VALUES('VP761', 'BA8133', '1999-03-09', 10000000)
INSERT INTO VienPhi VALUES('VP641', 'BA5595', '2011-09-18', 500000)
INSERT INTO VienPhi VALUES('VP441', 'BA9471', '2011-08-30', 64324950)
INSERT INTO VienPhi VALUES('VP691', 'BA2015', '2013-09-18', 500000)
INSERT INTO VienPhi VALUES('VP571', 'BA5595', '2021-10-20', 23842379)
INSERT INTO VienPhi VALUES('VP741', 'BA2979', '2018-03-21', 21364134)
INSERT INTO VienPhi VALUES('VP471', 'BA4706', '2017-08-31', 550000)
INSERT INTO VienPhi VALUES('VP801', 'BA8821', '2022-08-18', 450800)
INSERT INTO VienPhi VALUES('VP711', 'BA8133', '2000-03-09', 500000)
INSERT INTO VienPhi VALUES('VP341', 'BA7192', '2021-03-08', 500000)
INSERT INTO VienPhi VALUES('VP621', 'BA7110', '2005-05-16', 6353600)
INSERT INTO VienPhi VALUES('VP421', 'BA2510', '2019-08-05', 464647)
INSERT INTO VienPhi VALUES('VP681', 'BA7144', '2019-02-27', 743532)
INSERT INTO VienPhi VALUES('VP991', 'BA8982', '2021-09-24', 500000)
INSERT INTO VienPhi VALUES('VP611', 'BA6749', '2019-02-13', 748532)
INSERT INTO VienPhi VALUES('VP501', 'BA8830', '2022-09-19', 500000)
INSERT INTO VienPhi VALUES('VP951', 'BA9173', '2021-06-30', 965400)
INSERT INTO VienPhi VALUES('VP731', 'BA8877', '2000-06-13', 435300)
INSERT INTO VienPhi VALUES('VP271', 'BA3762', '2014-06-24', 824325)
INSERT INTO VienPhi VALUES('VP171', 'BA2277', '2022-10-12', 748532)
INSERT INTO VienPhi VALUES('VP861', 'BA1544', '2006-04-10', 6353600)
INSERT INTO VienPhi VALUES('VP431', 'BA7227', '2022-12-12', 967463)
INSERT INTO VienPhi VALUES('VP251', 'BA4690', '2020-05-19', 7702399)
INSERT INTO VienPhi VALUES('VP391', 'BA6793', '2019-10-30', 9029383)
INSERT INTO VienPhi VALUES('VP351', 'BA4143', '2021-05-29', 500000)
INSERT INTO VienPhi VALUES('VP891', 'BA6788', '2020-04-09', 754844)
INSERT INTO VienPhi VALUES('VP241', 'BA2096', '2022-10-09', 845244)
INSERT INTO VienPhi VALUES('VP781', 'BA8233', '2020-01-05', 6758600)
INSERT INTO VienPhi VALUES('VP131', 'BA8233', '2020-12-28', 450800)
INSERT INTO VienPhi VALUES('VP141', 'BA3868', '2020-06-27', 965400)
INSERT INTO VienPhi VALUES('VP531', 'BA4294', '2019-02-06', 538318)
INSERT INTO VienPhi VALUES('VP291', 'BA1143', '2020-12-06', 500000)
INSERT INTO VienPhi VALUES('VP38', 'BA6932', '2020-10-29', 500000)
INSERT INTO VienPhi VALUES('VP361', 'BA7044', '2019-06-25', 8876638)
INSERT INTO VienPhi VALUES('VP771', 'BA7350', '2022-02-02', 8971186)
INSERT INTO VienPhi VALUES('VP521', 'BA4421', '2021-12-04', 8891355)
INSERT INTO VienPhi VALUES('VP371', 'BA1318', '2020-08-27', 7115278)
INSERT INTO VienPhi VALUES('VP331', 'BA7098', '2021-03-14', 384039)
INSERT INTO VienPhi VALUES('VP561', 'BA6592', '2021-12-05', 550000)
INSERT INTO VienPhi VALUES('VP121', 'BA9874', '2020-12-30', 929021)
INSERT INTO VienPhi VALUES('VP831', 'BA8918', '2021-02-22', 6605548)
INSERT INTO VienPhi VALUES('VP481', 'BA7327', '2022-02-20', 314597)
INSERT INTO VienPhi VALUES('VP181', 'BA7573', '2019-09-25', 720480)
INSERT INTO VienPhi VALUES('VP541', 'BA1832', '2019-01-16', 500000)
INSERT INTO VienPhi VALUES('VP201', 'BA5975', '2019-09-06', 191569)
INSERT INTO VienPhi VALUES('VP551', 'BA1831', '2020-12-21', 500000)
INSERT INTO VienPhi VALUES('VP821', 'BA1695', '2019-01-12', 654700)
INSERT INTO VienPhi VALUES('VP701', 'BA3363', '2019-12-27', 955400)
INSERT INTO VienPhi VALUES('VP311', 'BA4510', '2022-05-30', 955448)
INSERT INTO VienPhi VALUES('VP411', 'BA9110', '2022-05-26', 404346)
INSERT INTO VienPhi VALUES('VP321', 'BA6036', '2020-12-21', 5641626)
INSERT INTO VienPhi VALUES('VP851', 'BA1866', '2022-07-28', 9746524)
INSERT INTO VienPhi VALUES('VP981', 'BA4706', '2021-07-23', 8232688)
INSERT INTO VienPhi VALUES('VP661', 'BA7117', '2020-06-23', 6727082)
INSERT INTO VienPhi VALUES('VP581', 'BA4000', '2019-12-27', 9332799)
INSERT INTO VienPhi VALUES('VP811', 'BA3605', '2020-10-20', 500000)
INSERT INTO VienPhi VALUES('VP511', 'BA6052', '2022-10-06', 5794140)
INSERT INTO VienPhi VALUES('VP451', 'BA5372', '2020-11-21', 9642153)
INSERT INTO VienPhi VALUES('VP931', 'BA1957', '2019-05-12', 8232688)
INSERT INTO VienPhi VALUES('VP651', 'BA1965', '2020-08-06', 820826)
INSERT INTO VienPhi VALUES('VP211', 'BA9584', '2021-10-23', 6888037)
INSERT INTO VienPhi VALUES('VP631', 'BA3836', '2019-04-12', 6571405)
INSERT INTO VienPhi VALUES('VP921', 'BA5688', '2022-12-05', 67890471)
INSERT INTO VienPhi VALUES('VP901', 'BA9096', '2020-04-24', 723943)
INSERT INTO VienPhi VALUES('VP671', 'BA9816', '2022-09-09', 6888712)
INSERT INTO VienPhi VALUES('VP161', 'BA6424', '2021-01-13', 500000)
INSERT INTO VienPhi VALUES('VP401', 'BA9687', '2022-02-24', 474082)
INSERT INTO VienPhi VALUES('VP281', 'BA4745', '2021-08-24', 651471)
INSERT INTO VienPhi VALUES('VP871', 'BA1925', '2020-05-08', 96058122)
INSERT INTO VienPhi VALUES('VP151', 'BA4198', '2019-11-11', 504005)
INSERT INTO VienPhi VALUES('VP941', 'BA6753', '2020-04-09', 431854)
INSERT INTO VienPhi VALUES('VP881', 'BA9770', '2019-11-13', 391020)
INSERT INTO VienPhi VALUES('VP961', 'BA7781', '2022-07-13', 500000)
INSERT INTO VienPhi VALUES('VP591', 'BA9469', '2020-09-10', 68026683)
INSERT INTO VienPhi VALUES('VP751', 'BA3265', '2021-02-16', 415622)
INSERT INTO VienPhi VALUES('VP111', 'BA1102', '2022-04-01', 403631)
INSERT INTO VienPhi VALUES('VP461', 'BA3236', '2020-11-04', 538846)
INSERT INTO VienPhi VALUES('VP601', 'BA8276', '2021-04-11', 383261)
INSERT INTO VienPhi VALUES('VP491', 'BA5055', '2022-07-24', 500000)
INSERT INTO VienPhi VALUES('VP261', 'BA9715', '2021-10-20', 500000)
INSERT INTO VienPhi VALUES('VP721', 'BA1465', '2020-08-18', 955184)
INSERT INTO VienPhi VALUES('VP231', 'BA8285', '2021-10-28', 485007)
INSERT INTO VienPhi VALUES('VP791', 'BA1644', '2021-05-01', 403631)
INSERT INTO VienPhi VALUES('VP001', 'BA4440', '2019-05-04', 720321)
INSERT INTO VienPhi VALUES('VP031', 'BA1257', '2021-08-25', 52259677)
INSERT INTO VienPhi VALUES('VP021', 'BA2132', '2022-09-20', 444699)
INSERT INTO VienPhi VALUES('VP041', 'BA1031', '2022-07-02', 67669263)
INSERT INTO VienPhi VALUES('VP011', 'BA5591', '2019-06-30', 568412)
INSERT INTO VienPhi VALUES('VP051', 'BA9749', '2022-10-28', 5854221)
INSERT INTO VienPhi VALUES('VP061', 'BA1092', '2020-09-30', 917775)
INSERT INTO VienPhi VALUES('VP071', 'BA1139', '2020-10-20', 829961)
INSERT INTO VienPhi VALUES('VP081', 'BA2134', '2019-12-27', 79718539)
INSERT INTO VienPhi VALUES('VP091', 'BA7338', '2022-03-14', 500000)
INSERT INTO VienPhi VALUES('VP100', 'BA3554', '2020-12-13', 6724302)
INSERT INTO VienPhi VALUES('VP102', 'BA2873', '2019-11-19', 8447499)
INSERT INTO VienPhi VALUES('VP103', 'BA2601', '2019-12-13', 68026683)
INSERT INTO VienPhi VALUES('VP104', 'BA6430', '2020-09-13', 9668296)
INSERT INTO VienPhi VALUES('VP105', 'BA6225', '2022-12-10', 681126)
INSERT INTO VienPhi VALUES('VP106', 'BA4475', '2020-01-15', 485007)
INSERT INTO VienPhi VALUES('VP107', 'BA2108', '2020-05-03', 228976)
INSERT INTO VienPhi VALUES('VP108', 'BA8821', '2022-09-18', 500000)
INSERT INTO VienPhi VALUES('VP109', 'BA8821', '2022-09-30', 485007)
INSERT INTO VienPhi VALUES('VP110', 'BA8821', '2023-03-30', 720321)

INSERT INTO PhieuDangKiKhamBenh VALUES('DK18', 'BA5780', 'P360')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK80', 'BA2979', 'P736')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK97', 'BA8821', 'P942')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK79', 'BA4660', 'P374')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK98', 'BA9471', 'P670')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK73', 'BA1474', 'P555')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK30', 'BA6592', 'P289')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK31', 'BA8233', 'P329')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK70', 'BA5688', 'P982')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK36', 'BA7144', 'P437')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK57', 'BA7110', 'P129')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK37', 'BA6749', 'P868')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK26', 'BA9173', 'P866')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK47', 'BA3762', 'P130')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK82', 'BA2277', 'P893')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK74', 'BA3868', 'P519')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK50', 'BA8877', 'P329')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK01', 'BA1544', 'P437')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK02', 'BA2510', 'P887')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK60', 'BA8918', 'P234')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK04', 'BA4690', 'P923')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK05', 'BA6793', 'P833')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK06', 'BA7098', 'P960')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK07', 'BA7327', 'P860')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK08', 'BA7573', 'P321')
INSERT INTO PhieuDangKiKhamBenh VALUES('DK09', 'BA9874', 'P555')

INSERT INTO HoSoDieuTriNoiTru VALUES('NT56', 'BA2979', 'P887', '2017-03-19', '2017-03-21')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT19', 'BA8821', 'P234', '2022-08-18', '2022-08-20')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT42', 'BA4660', 'P923', '2018-10-09', '2018-10-14')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT25', 'BA3689', 'P833', '2007-09-20', '2007-09-27')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT55', 'BA1474', 'P960', '2010-01-30', '2010-02-02')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT79', 'BA9471', 'P860', '2011-08-17', '2011-08-30')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT75', 'BA5595', 'P321', '2021-10-18', '2021-10-20')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT62', 'BA8821', 'P329', '2022-08-20', '2022-08-30')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT13', 'BA8233', 'P982', '2020-12-28', '2020-01-05')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT94', 'BA7227', 'P437', '2022-10-21', '2022-12-12')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT92', 'BA3363', 'P129', '2019-12-07', '2019-12-27')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT76', 'BA1139', 'P360', '2020-10-02', '2020-10-20')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT38', 'BA4510', 'P736', '2022-05-17', '2022-05-30')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT20', 'BA1965', 'P942', '2020-06-06', '2020-08-06')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT83', 'BA5591', 'P374', '2019-06-27', '2019-06-30')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT70', 'BA1092', 'P670', '2020-09-16', '2020-09-30')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT99', 'BA2096', 'P555', '2022-09-09', '2022-10-09')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT16', 'BA1695', 'P289', '2019-01-01', '2019-01-12')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT57', 'BA4440', 'P868', '2019-03-04', '2019-05-04')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT40', 'BA1465', 'P866', '2020-08-18', '2020-08-28')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT22', 'BA8285', 'P130', '2021-10-28', '2021-11-28')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT17', 'BA1644', 'P893', '2021-05-01', '2021-05-30')
INSERT INTO HoSoDieuTriNoiTru VALUES('NT72', 'BA2132', 'P519', '2022-09-20', '2022-09-20')

INSERT INTO PhieuXetNghiem VALUES('XN9752', 'BA2015', N'Máu', '2011-09-18', N'Nhóm máu O')
INSERT INTO PhieuXetNghiem VALUES('XN9667', 'BA5595', N'HIV', '2011-09-18', N'Âm tính HIV')
INSERT INTO PhieuXetNghiem VALUES('XN4749', 'BA9471', N'HIV', '2011-08-17', N'Âm tính HIV')
INSERT INTO PhieuXetNghiem VALUES('XN5173', 'BA2015', N'ADN', '2003-08-02', N'Cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN2054', 'BA4706', N'Máu', '2017-08-31', N'Nhóm máu AB')
INSERT INTO PhieuXetNghiem VALUES('XN9878', 'BA8133', N'Máu', '2000-03-09', N'Nhóm máu A')
INSERT INTO PhieuXetNghiem VALUES('XN4014', 'BA7192', N'Máu', '2021-03-08', N'Nhóm máu B')
INSERT INTO PhieuXetNghiem VALUES('XN3236', 'BA6424', N'HIV', '2021-01-13', N'Dương tính HIV')
INSERT INTO PhieuXetNghiem VALUES('XN1798', 'BA5055', N'ADN', '2022-07-24', N'Cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN2987', 'BA9715', N'HIV', '2021-10-20', N'Dương tính HIV')
INSERT INTO PhieuXetNghiem VALUES('XN8219', 'BA8982', N'ADN', '2021-09-24', N'Không cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN5606', 'BA4143', N'HIV', '2021-05-29', N'Âm tính HIV')
INSERT INTO PhieuXetNghiem VALUES('XN7862', 'BA8830', N'Máu', '2022-09-19', N'Nhóm máu B')
INSERT INTO PhieuXetNghiem VALUES('XN3322', 'BA7781', N'ADN', '2022-07-13', N'Không cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN9942', 'BA7338', N'HIV', '2022-03-14', N'Dương tính HIV')
INSERT INTO PhieuXetNghiem VALUES('XN9576', 'BA1143', N'ADN', '2020-12-06', N'Cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN1102', 'BA1831', N'Máu', '2020-12-21', N'Nhóm máu A')
INSERT INTO PhieuXetNghiem VALUES('XN9064', 'BA1832', N'Máu', '2019-01-16', N'Nhóm máu O')
INSERT INTO PhieuXetNghiem VALUES('XN1857', 'BA3605', N'Máu', '2020-10-20', N'Nhóm máu O')
INSERT INTO PhieuXetNghiem VALUES('XN8274', 'BA6932', N'Máu', '2020-10-29', N'Nhóm máu AB')
INSERT INTO PhieuXetNghiem VALUES('XN2927', 'BA6788', N'ADN', '2020-04-09', N'Không cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN3421', 'BA9110', N'ADN', '2022-05-26', N'Cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN4052', 'BA4294', N'ADN', '2019-02-06', N'Không cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN3467', 'BA5975', N'Máu', '2019-09-06', N'Nhóm máu A')
INSERT INTO PhieuXetNghiem VALUES('XN2515', 'BA4198', N'Máu', '2019-11-11', N'Nhóm máu B')
INSERT INTO PhieuXetNghiem VALUES('XN9762', 'BA6753', N'ADN', '2020-04-09', N'Cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN4461', 'BA9770', N'Máu', '2019-11-13', N'Nhóm máu B')
INSERT INTO PhieuXetNghiem VALUES('XN6220', 'BA9687', N'HIV', '2022-02-24', N'Âm tính HIV')
INSERT INTO PhieuXetNghiem VALUES('XN5564', 'BA4745', N'HIV', '2021-08-24', N'Âm tính HIV')
INSERT INTO PhieuXetNghiem VALUES('XN2771', 'BA9816', N'Máu', '2020-04-24', N'Nhóm máu B')
INSERT INTO PhieuXetNghiem VALUES('XN1426', 'BA3265', N'Máu', '2021-02-16', N'Nhóm máu O')
INSERT INTO PhieuXetNghiem VALUES('XN4859', 'BA1102', N'Máu', '2022-04-01', N'Nhóm máu B')
INSERT INTO PhieuXetNghiem VALUES('XN2928', 'BA3236', N'Máu', '2020-11-04', N'Nhóm máu O')
INSERT INTO PhieuXetNghiem VALUES('XN8140', 'BA8276', N'Máu', '2021-04-11', N'Nhóm máu O')
INSERT INTO PhieuXetNghiem VALUES('XN1180', 'BA6225', N'ADN', '2022-12-10', N'Cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN9083', 'BA4475', N'ADN', '2020-01-15', N'Cùng huyết thống')
INSERT INTO PhieuXetNghiem VALUES('XN8212', 'BA2108', N'ADN', '2020-05-03', N'Không cùng huyết thống')

INSERT INTO Khoa VALUES('CC8678', N'Khoa Cấp cứu')
INSERT INTO Khoa VALUES('KN9238', N'Khoa Nội')
INSERT INTO Khoa VALUES('NK6466', N'Khoa Ngoại')
INSERT INTO Khoa VALUES('ND2423', N'Khoa Nhi')

INSERT INTO BacSi VALUES('BSNK61', N'Nguyễn Minh', N'Nam', N'Hà Nội', '0961780422', 'NK6466', N'Chuyên Khoa I')
INSERT INTO BacSi VALUES('BSCC89', N'Phan Phú Khang', N'Nam', N'Hồ Chí Minh', '0811514100', 'CC8678', N'Chuyên Khoa II')
INSERT INTO BacSi VALUES('BSKN85', N'Nguyễn Tuấn', N'Nam', N'Bình Dương', '0789255187', 'KN9238', N'Chuyên Khoa II')
INSERT INTO BacSi VALUES('BSNK41', N'Trần Ngọc Linh', N'Nữ', N'Hồ Chí Minh', '0542309082', 'NK6466', N'Chuyên Khoa II')
INSERT INTO BacSi VALUES('BSCC36', N'Nguyễn Tấn Dũng', N'Nam', N'Vũng Tàu', '0441007562', 'CC8678', N'Chuyên Khoa I')
INSERT INTO BacSi VALUES('BSND37', N'Nguyễn Phú Thịnh', N'Nam', N'Hồ Chí Minh', '0960385480', 'ND2423', N'Chuyên Khoa I')
INSERT INTO BacSi VALUES('BSCC10', N'Đỗ Anh Thư', N'Nữ', N'Hà Nội', '0959474329', 'CC8678', N'Chuyên Khoa I')
INSERT INTO BacSi VALUES('BSND71', N'Lý Quang Bửu', N'Nam', N'Bình Dương', '0313441742', 'ND2423', N'Chuyên Khoa II')
INSERT INTO BacSi VALUES('BSKN72', N'Phạm Công Dũng', N'Nam', N'Hà Nội', '0801950520', 'KN9238', N'Chuyên Khoa II')
INSERT INTO BacSi VALUES('BSND23', N'Bùi Việt Thanh Mai', N'Nữ', N'Vũng Tàu', '0516417944', 'ND2423', N'Chuyên Khoa II')
INSERT INTO BacSi VALUES('BSKN14', N'Nguyễn Ðình Chương', N'Nam', N'Hồ Chí Minh', '0905913293', 'KN9238', N'Chuyên Khoa I')

INSERT INTO Benh VALUES('B001', N'Viêm xoang', N'Ngạt mũi, cảy mũi mủ, đau mặt,..')
INSERT INTO Benh VALUES('B002', N'Ung thư phổi', N'Ho ra máu, đau ngực,..')
INSERT INTO Benh VALUES('B003', N'Sốt xuất huyết', N'Đau phía sau măt, sốt cao, phát ban,..')
INSERT INTO Benh VALUES('B004', N'Ung thư da', N'Ổ dày sừng có loét, nổi cục, dễ chảy máu,..')
INSERT INTO Benh VALUES('B005', N'Không có bệnh', N'Không')
INSERT INTO Benh VALUES('B006', N'Cúm', N'Sốt hoặc cảm thấy có dấu hiệu sốt/ớn lạnh, viêm họng, đau đầu,…')
INSERT INTO Benh VALUES('B007', N'Tay-chân-miệng', N'Sốt: sốt nhẹ hoặc sốt cao, tổn thương ở da,..')
INSERT INTO Benh VALUES('B008', N'Bạch hầu', N'Sốt nhẹ, đau họng, ho, khàn tiếng, chán ăn')
INSERT INTO Benh VALUES('B009', N'Thủy đậu', N'Sốt cao, đau đầu, chán ăn, mệt mỏi, buồn nôn, đau cơ. ')
INSERT INTO Benh VALUES('B010', N'Sởi', N'Sốt, ho khan, chảy nước mũi, mắt đỏ, không chịu được ánh sáng ')

INSERT INTO PhieuKhamBenh VALUES('KB1795', 'BA5780', '2022-07-22')
INSERT INTO PhieuKhamBenh VALUES('KB6641', 'BA2979', '2017-03-19')
INSERT INTO PhieuKhamBenh VALUES('KB8615', 'BA8821', '2022-08-18')
INSERT INTO PhieuKhamBenh VALUES('KB3228', 'BA4660', '2018-10-07')
INSERT INTO PhieuKhamBenh VALUES('KB1119', 'BA9471', '2011-08-07')
INSERT INTO PhieuKhamBenh VALUES('KB1889', 'BA1474', '2012-02-02')
INSERT INTO PhieuKhamBenh VALUES('KB1200', 'BA7110', '2005-02-16')
INSERT INTO PhieuKhamBenh VALUES('KB9352', 'BA2510', '2019-08-05')
INSERT INTO PhieuKhamBenh VALUES('KB6222', 'BA7144', '2019-02-23')
INSERT INTO PhieuKhamBenh VALUES('KB8490', 'BA6749', '2019-01-13')
INSERT INTO PhieuKhamBenh VALUES('KB9041', 'BA8877', '2000-06-13')
INSERT INTO PhieuKhamBenh VALUES('KB3805', 'BA9173', '2021-06-20')
INSERT INTO PhieuKhamBenh VALUES('KB8509', 'BA3762', '2014-04-24')
INSERT INTO PhieuKhamBenh VALUES('KB1228', 'BA2277', '2022-09-12')
INSERT INTO PhieuKhamBenh VALUES('KB5346', 'BA1544', '2006-01-10')
INSERT INTO PhieuKhamBenh VALUES('KB7858', 'BA3868', '2020-06-19')
INSERT INTO PhieuKhamBenh VALUES('KB6402', 'BA8233', '2020-11-28')
INSERT INTO PhieuKhamBenh VALUES('KB7784', 'BA6592', '2021-12-05')
INSERT INTO PhieuKhamBenh VALUES('KB6896', 'BA7327', '2022-02-20')
INSERT INTO PhieuKhamBenh VALUES('KB9776', 'BA7573', '2019-08-25')
INSERT INTO PhieuKhamBenh VALUES('KB7136', 'BA4690', '2020-04-19')
INSERT INTO PhieuKhamBenh VALUES('KB8742', 'BA6793', '2019-10-11')
INSERT INTO PhieuKhamBenh VALUES('KB8367', 'BA7098', '2021-03-14')
INSERT INTO PhieuKhamBenh VALUES('KB4093', 'BA5688', '2022-12-05')
INSERT INTO PhieuKhamBenh VALUES('KB2680', 'BA8918', '2021-02-02')
INSERT INTO PhieuKhamBenh VALUES('KB3312', 'BA9874', '2020-12-08')
INSERT INTO PhieuKhamBenh VALUES('KB3313', 'BA8821', '2022-09-18')
INSERT INTO PhieuKhamBenh VALUES('KB3324', 'BA8821', '2022-09-30')
INSERT INTO PhieuKhamBenh VALUES('KB8324', 'BA8821', '2023-03-30')

INSERT INTO ChiTietPKB VALUES('KB8367', 'B001', 'BSKN85', N'Ngạt mũi, cảy mũi mủ, đau mặt,..')
INSERT INTO ChiTietPKB VALUES('KB4093', 'B003', 'BSKN85', N'Đau phía sau măt, sốt cao, phát ban,..')
INSERT INTO ChiTietPKB VALUES('KB2680', 'B002', 'BSNK61', N'Ho ra máu, đau ngực,..')
INSERT INTO ChiTietPKB VALUES('KB3312', 'B002', 'BSNK41', N'Ho ra máu, đau ngực,..')
INSERT INTO ChiTietPKB VALUES('KB6896', 'B004', 'BSNK41', N'Ổ dày sừng có loét, nổi cục, dễ chảy máu,..')
INSERT INTO ChiTietPKB VALUES('KB9776', 'B003', 'BSKN85', N'Đau phía sau măt, sốt cao, phát ban,..')
INSERT INTO ChiTietPKB VALUES('KB7136', 'B005', 'BSKN85', N'Không có bệnh')
INSERT INTO ChiTietPKB VALUES('KB8742', 'B005', 'BSKN85', N'Không có bệnh')
INSERT INTO ChiTietPKB VALUES('KB1795', 'B007', 'BSND71', N'Sốt: sốt nhẹ hoặc sốt cao, tổn thương ở da,..')
INSERT INTO ChiTietPKB VALUES('KB6641', 'B006', 'BSND37', N'Sốt hoặc cảm thấy có dấu hiệu sốt/ớn lạnh, viêm họng, đau đầu,…')
INSERT INTO ChiTietPKB VALUES('KB8615', 'B009', 'BSKN85', N'Sốt cao, đau đầu, chán ăn, mệt mỏi, buồn nôn, đau cơ. ')
INSERT INTO ChiTietPKB VALUES('KB3228', 'B005', 'BSND23', N'Không có bệnh')
INSERT INTO ChiTietPKB VALUES('KB1119', 'B008', 'BSKN85', N'Sốt nhẹ, đau họng, ho, khàn tiếng, chán ăn')
INSERT INTO ChiTietPKB VALUES('KB1889', 'B003', 'BSND37', N'Đau phía sau măt, sốt cao, phát ban,..')
INSERT INTO ChiTietPKB VALUES('KB1200', 'B010', 'BSKN14', N'Sốt, ho khan, chảy nước mũi, mắt đỏ, không chịu được ánh sáng ')
INSERT INTO ChiTietPKB VALUES('KB9352', 'B007', 'BSND23', N'Sốt: sốt nhẹ hoặc sốt cao, tổn thương ở da,..')
INSERT INTO ChiTietPKB VALUES('KB6222', 'B008', 'BSKN85', N'Sốt nhẹ, đau họng, ho, khàn tiếng, chán ăn')
INSERT INTO ChiTietPKB VALUES('KB8490', 'B002', 'BSCC10', N'Ho ra máu, đau ngực,..')
INSERT INTO ChiTietPKB VALUES('KB9041', 'B005', 'BSKN85', N'Không có bệnh')
INSERT INTO ChiTietPKB VALUES('KB3805', 'B010', 'BSKN14', N'Sốt, ho khan, chảy nước mũi, mắt đỏ, không chịu được ánh sáng ')
INSERT INTO ChiTietPKB VALUES('KB8509', 'B004', 'BSNK61', N'Ổ dày sừng có loét, nổi cục, dễ chảy máu,..')
INSERT INTO ChiTietPKB VALUES('KB1228', 'B002', 'BSNK61', N'Ho ra máu, đau ngực,..')
INSERT INTO ChiTietPKB VALUES('KB5346', 'B005', 'BSKN14', N'Không có bệnh')
INSERT INTO ChiTietPKB VALUES('KB7858', 'B002', 'BSNK61', N'Ho ra máu, đau ngực,..')
INSERT INTO ChiTietPKB VALUES('KB6402', 'B004', 'BSNK41', N'Ổ dày sừng có loét, nổi cục, dễ chảy máu,..')
INSERT INTO ChiTietPKB VALUES('KB7784', 'B010', 'BSKN14', N'Sốt, ho khan, chảy nước mũi, mắt đỏ, không chịu được ánh sáng ')
INSERT INTO ChiTietPKB VALUES('KB3313', 'B003', 'BSKN85', N'Đau phía sau măt, sốt cao, phát ban,..')
INSERT INTO ChiTietPKB VALUES('KB3324', 'B010', 'BSKN14', N'Sốt, ho khan, chảy nước mũi, mắt đỏ, không chịu được ánh sáng ')
INSERT INTO ChiTietPKB VALUES('KB8324', 'B002', 'BSCC10', N'Ho ra máu, đau ngực,..')

							--TRIGGER--
--1-TRiGGER KIỂM TRA NGÀY NHẬP VIỆN KHÔNG ĐƯỢC LỚN HƠN NGÀY XUÁT VIỆN TRONG BẢNG HỒ SƠ ĐIỀU TRỊ NỘI TRÚ
GO	
CREATE TRIGGER TRIGGER_INS_UPD_DIEUTRINOITRU
ON HoSoDieuTriNoiTru
FOR INSERT, UPDATE
AS
BEGIN
    IF EXISTS (
        SELECT *
        FROM inserted
        WHERE NgayNV > NgayXV)
    BEGIN
        RAISERROR ('Ngày nhập viện không được lớn hơn ngày xuất viện.', 16, 1)
        ROLLBACK TRANSACTION
    END
END
--KIỂM TRA
 --TRƯỜNG HỢP NGÀY NHẬP VIỆN > NGÀY XUẤT VIỆN
 INSERT INTO HoSoDieuTriNoiTru VALUES('NT80', 'BA1143', 'P942', '2020-09-06', '2020-08-06')

 --xóa
 DROP TRIGGER TRIGGER_INS_UPD_DIEUTRINOITRU

	 --2- Kiểm tra ngày xét nghiệm KHÔNG ĐƯỢC TRƯỚC ngày khám bệnh
GO
CREATE TRIGGER TRIGGER_INS_UPD_PhieuXetNghiem
ON PhieuXetNghiem
FOR INSERT, UPDATE
AS
BEGIN
   
    IF EXISTS (
        SELECT *
        FROM inserted AS I
        INNER JOIN PhieuKhamBenh AS PKB ON I.MSBA = PKB.MSBA
        WHERE I.NgayXN < PKB.NgayKham
    )
    BEGIN
        RAISERROR ('Ngày xét nghiệm phải lớn hơn hoặc bằng ngày khám bệnh.', 16, 1)
        ROLLBACK TRANSACTION
    END
END

--KIỂM TRA TRƯỜNG HỢP NGÀY XÉT NGHIỆM < NGÀY KHÁM BỆNH
INSERT INTO PhieuXetNghiem VALUES('XN9898', 'BA5780', N'Máu', '2021-04-11', N'Nhóm máu O')
 --xóa
 DROP TRIGGER TRIGGER_INS_UPD_PhieuXetNghiem

--3- TRIGGER TỰ ĐỘNG CẬP NHẬT NGÀY LẬP HỒ SƠ NGÀY SAU KHI THÊM MỚI HỒ SƠ BỆNH ÁN
GO
CREATE TRIGGER Trg_INS_CapNhatNgayHoSoBenhAn
ON HoSoBenhAn
AFTER INSERT
AS
BEGIN
    UPDATE HoSoBenhAn
    SET NgayLapHS = GETDATE()
    FROM HoSoBenhAn AS H
    INNER JOIN inserted AS I ON H.MSBA = I.MSBA
END

--TRƯỜNG HỢP NHẬP SAI NGÀY THÌ TỰ ĐỘNG CHUYỂN SANG NGÀY ĐÚNG VỚI NGÀY LẬP HỒ SƠ
INSERT INTO HoSoBenhAn VALUES('BA9898', N'Hồ Tấn Anh', '2003-05-30', N'Đà Nẵng', '0388754761', '2021-02-24')
--KIỂM TRA
SELECT * FROM HoSoBenhAn
-- XÓA
DELETE FROM HoSoBenhAn
 WHERE MSBA='BA9898'

  DROP TRIGGER Trg_INS_CapNhatNgayHoSoBenhAn


 --4-KIỂM TRA MÃ SỐ BỆNH ÁN KHÁC NHƯNG CÓ TÊN, NGAFYSINH, ĐỊA CHỈ, QUÊ QUÁN , SỐ ĐIỆN THOẠI GIỐNG VỚI THÔNG TIN BỆNH NHÂN ĐÃ CÓ TRONG HỆ THỐNG
GO
CREATE TRIGGER Trg_INS_KIEMTRATRUNGBENHNHAN
ON HoSoBenhAn
FOR INSERT
AS
BEGIN
    IF EXISTS (
        SELECT 1
        FROM HoSoBenhAn AS H
        INNER JOIN inserted AS I ON H.HoTen = I.HoTen AND H.NgSinh = I.NgSinh AND H.DiaChi = I.DiaChi
        WHERE H.MSBA <> I.MSBA
    )
    BEGIN
        RAISERROR ('Thông tin bệnh nhân đã tồn tại trong hệ thống.', 16, 1)
        ROLLBACK TRANSACTION
    END
END
	
--TRƯỜNG HỢP MÃ SỐ BỆNH ÁN KHÁC NHƯNG CÓ TÊN, NGAFYSINH, ĐỊA CHỈ, QUÊ QUÁN , SỐ ĐIỆN THOẠI GIỐNG VỚI THÔNG TIN BỆNH NHÂN ĐÃ CÓ TRONG HỆ THỐNG
INSERT INTO HoSoBenhAn VALUES('BA9898', N'Võ Quang Triệu', '2003-02-11', N'Thủ Dầu Một', '0375029242', '2022-10-28')
--KIỂM TRA
SELECT * FROM HoSoBenhAn WHERE HOTEN=N'Võ Quang Triệu'
--XÓA 
DROP TRIGGER Trg_INS_KIEMTRATRUNGBENHNHAN
--5- SAU KHI XÓA HỒ SƠ BỆNH ÁN SẼ XÓA CÁC THÔNG TIN LIÊN QUAN
GO
CREATE TRIGGER Trg_DEL_HoSoBenhAn
ON HoSoBenhAn
AFTER DELETE
AS
BEGIN
    DECLARE @MSBA CHAR(6)

    SELECT @MSBA = MSBA
    FROM deleted

    DELETE FROM VienPhi WHERE MSBA = @MSBA
    DELETE FROM PhieuDangKiKhamBenh WHERE MSBA = @MSBA
    DELETE FROM HoSoDieuTriNoiTru WHERE MSBA = @MSBA
    DELETE FROM PhieuXetNghiem WHERE MSBA = @MSBA
    DELETE FROM PhieuKhamBenh WHERE MSBA = @MSBA
 
END
--XÓA 
DROP TRIGGER Trg_DEL_HoSoBenhAn

--6-- KIỂM TRA KHI THÊM MỚI HOẶC UPDATE MÃ BÁC SĨ PHẢI BẮT ĐẦU BẰNG 'BS' VÀ 2 KÍ TỰ TIẾP THEO PHẢI LÀ 2 KÍ TỰ ĐẦU TIÊN CỦA MÃ KHOA
-- VD: BSCC10 THUỘC KHOA CÓ MÃ CC8687: CÓ 2 KÍ TỰ ĐẦU TIÊN LÀ BS_ 2 KÍ TỰ TIẾP THEO LÀ 'CC' CÓ NGHĨA LÀ'CẤP CỨU'

GO
CREATE TRIGGER TRIGGER_INS_UPD_BacSi
ON BacSi
FOR INSERT, UPDATE
AS
BEGIN
  
    IF EXISTS (
        SELECT *
        FROM inserted
        WHERE MSBS NOT LIKE 'BS' + SUBSTRING(MSKhoa, 1, 2) + '%'
    )
    BEGIN
        RAISERROR ('Mã bác sĩ không hợp lệ!', 16, 1)
        ROLLBACK TRANSACTION
    END
END

--TRƯỜNG HỢP SAI MÃ BÁC SĨ
INSERT INTO BacSi VALUES('BSAB61', N'Hồ Tấn Anh', N'Nam', N'Quảng Nam', '0961780422', 'NK6466', N'Phó Giáo Sư', N'Thạc sĩ', N'Chuyên Khoa I')
--KIỂM TRA
SELECT * FROM BACSI
SELECT * FROM KHOA
--XÓA 
DROP TRIGGER TRIGGER_INS_UPD_BacSi

------------------------------------------------------------------------------------------------------------------------
						--Stored Procedure 
---Xem lịch sử khám chữa bệnh của một bệnh nhân
GO
CREATE PROCEDURE LSKCB
@HoTen NVARCHAR(50), @SoDT VARCHAR(10)
AS 
BEGIN
	SELECT HoSoBenhAn.HoTen , HoSoBenhAn.SoDT , SoTien, NgayKham , TenBenh , TrieuChung, BacSi.HoTen AS HoTenBacSiKham
	FROM VienPhi,ChiTietPKB,Benh,PhieuKhamBenh,HoSoBenhAn, BacSi
	WHERE HoSoBenhAn.HoTen=@HoTen AND HoSoBenhAn.SoDT=@SoDT
		AND VienPhi.MSBA = HoSoBenhAn.MSBA
		AND ChiTietPKB.MSPKB = PhieuKhamBenh.MSPKB
		AND Benh.MSBenh =ChiTietPKB.MSBenh
		AND HoSoBenhAn.MSBA=PhieuKhamBenh.MSBA
		AND VIENPHI.NgayVP=PHIEUKHAMBENH.NgayKham
		AND ChiTietPKB.MSBS=BacSi.MSBS
END
--THỰC THI
GO
EXEC LSKCB  @HoTen= N'Trần Đình Trung' , @SoDT= '0389156816'
GO
--XÓA
DROP PROC LSKCB
GO
---xem thông tin về các phiếu khám bệnh
GO

CREATE PROCEDURE TTPKB
@MSBA CHAR(6)
AS
BEGIN
	SELECT PhieuKhamBenh.MSBA,PhieuKhamBenh.MSPKB,HoSoBenhAn.HoTen,HoSoBenhAn.NgSinh,HoSoBenhAn.DiaChi,TenBenh,
	ChuanDoan, BacSi.HoTen AS HoTenBacSi, NgayKham
	FROM ChiTietPKB, BacSi, PhieuKhamBenh, HoSoBenhAn,Benh
	WHERE PhieuKhamBenh.MSBA = @MSBA
		AND ChiTietPKB.MSPKB = PhieuKhamBenh.MSPKB
		AND BacSi.MSBS = ChiTietPKB.MSBS
		AND HoSoBenhAn.MSBA = PhieuKhamBenh.MSBA
		AND Benh.MSBenh = ChiTietPKB.MSBenh
END
--THỰC THI
GO
EXEC TTPKB  @MSBA= 'BA8821'
GO
--XÓA
DROP PROC TTPKB
GO

---Tra cứu thông tin bệnh nhân đã điều trị nội trú tại bệnh viện
GO

CREATE PROCEDURE BNDTNT
@HoTen NVARCHAR(50), @SoDT VARCHAR(10)
AS
BEGIN
	SELECT HoTen,SoDT,HoSoBenhAn.NgSinh,HoSoBenhAn.DiaChi,MSDTNT,MSPhong, NgayNV, NgayXV, SoTien
	FROM HoSoBenhAn,VienPhi,HoSoDieuTriNoiTru
	WHERE HoTen=@HoTen AND SoDT=@SoDT
		AND HoSoBenhAn.MSBA = VienPhi.MSBA
		AND HoSoDieuTriNoiTru.MSBA=HoSoBenhAn.MSBA
		AND VienPhi.NgayVP =HoSoDieuTriNoiTru.NgayXV
END

GO
--THỰC THI
GO
EXEC BNDTNT  @HoTen= N'Trần Đình Trung' , @SoDT= '0389156816'
GO
--XÓA
DROP PROC BNDTNT
GO


---phiếu xét nghiệm đã được thực hiện.
GO
CREATE PROCEDURE SOPXN
@HoTen NVARCHAR(50), @SoDT VARCHAR(10)
AS
BEGIN
	IF EXISTS(SELECT *
		FROM PhieuXetNghiem,HoSoBenhAn
		WHERE PhieuXetNghiem.MSBA=HoSoBenhAn.MSBA 
		AND HoSoBenhAn.HoTen=@HoTen AND HoSoBenhAn.SoDT=@SoDT)
	BEGIN
		SELECT MSXN,HoSoBenhAn.HoTen,HoSoBenhAn.SoDT,HoSoBenhAn.NgSinh,HoSoBenhAn.DiaChi,LoaiXN,NgayXN,KQXN
		FROM PhieuXetNghiem,HoSoBenhAn
		WHERE PhieuXetNghiem.MSBA=HoSoBenhAn.MSBA 
		AND HoSoBenhAn.HoTen=@HoTen AND HoSoBenhAn.SoDT=@SoDT

	END
	ELSE
		BEGIN
			PRINT N'Người này chưa đi xét nghiệm lần nào!'
			RETURN 0
		END
END
--THỰC THI
GO
--+CÓ

EXEC SOPXN  @HoTen= N'Ngô Thanh Hào' , @SoDT= '0348682203'
GO
--+KHÔNG CÓ

EXEC SOPXN  @HoTen= N'Vũ Thu An' , @SoDT= '0395470106'
GO
--XÓA
DROP PROC SOPXN
GO
---Tìm kiếm hồ sơ bệnh án
GO
CREATE PROCEDURE SEARCHHOSO
@HoTen NVARCHAR(50) ,@SoDT VARCHAR(10)
AS
BEGIN
	SELECT *FROM HoSoBenhAn WHERE HoTen=@HoTen AND SoDT=@SoDT
END
--THỰC THI
GO
EXEC SEARCHHOSO  @HoTen= N'Vũ Thu An', @SoDT= '0395470106'
GO
--KIỂM TRA
SELECT *  FROM PhieuKhamBenh
SELECT *  FROM ChiTietPKB
SELECT *  FROM HoSoBenhAn
--XÓA
DROP PROC SEARCHHOSO
GO

--FUNCTION
--Xem lịch khám bệnh theo ngày của bác sĩ
GO
CREATE FUNCTION FUNC_LichKB(@MASO CHAR(6), @DATE SMALLDATETIME)
RETURNS @TABLE_LKB TABLE(ThoiGian SMALLDATETIME, Phong CHAR(4),  TenBenhNhan NVARCHAR(50), MSBA CHAR(6), LOAI VARCHAR(10)) AS
BEGIN
	INSERT INTO @TABLE_LKB(ThoiGian, Phong, TenBenhNhan, MSBA, LOAI)
	SELECT PKB.NgayKham, PDK.MSPhong, BA.HoTen, BA.MSBA, 'Kham Benh'
	FROM HoSoBenhAn BA JOIN PhieuKhamBenh PKB ON BA.MSBA = PKB.MSBA
		JOIN PhieuDangKiKhamBenh PDK ON BA.MSBA = PDK.MSBA
		JOIN ChiTietPKB CT ON PKB.MSPKB = CT.MSPKB
		JOIN BacSi BS ON CT.MSBS = BS.MSBS
	WHERE BS.MSBS = @MASO AND NgayKham = @DATE
	ORDER BY NgayKham
	RETURN 
END
--THỰC THI
DECLARE @MASO CHAR(6), @DATE SMALLDATETIME
SET @MASO = 'BSNK61'
SET @DATE = '2022/09/12'
SELECT * FROM FUNC_LichKB(@MASO, @DATE)

-- XÓA
DROP FUNCTION FUNC_LichKB

			--Thống kê
--THỐNG KÊ BỆNH NHÂN THEO NĂM TỪ NĂM 2019 ĐẾN NAY

GO
CREATE PROCEDURE THONG_KE_BENH_NHAN_THEO_NAM
AS
BEGIN
	SELECT YEAR(NgayLapHS) AS Nam, COUNT(*) AS TongSoLuongBenhNhan
	FROM HoSoBenhAn
	WHERE YEAR(NgayLapHS)>=2019
	GROUP BY YEAR(NgayLapHS)
	ORDER BY YEAR(NgayLapHS)
END

EXEC THONG_KE_BENH_NHAN_THEO_NAM


GO
CREATE VIEW ViewThongKeBenhNhan AS
SELECT YEAR(NgayLapHS) AS Nam, COUNT(*) AS TongSoLuongBenhNhan
	FROM HoSoBenhAn
	WHERE YEAR(NgayLapHS)>=2019
	GROUP BY YEAR(NgayLapHS)
SELECT *  FROM ViewThongKeBenhNhan


 DROP PROCEDURE THONG_KE_BENH_NHAN_THEO_NAM

--Thống kê số tiền viện phí của bệnh viện đã thu theo từng tháng

GO
CREATE FUNCTION FUNC_Thong_Ke_VP_Thang(@YEAR INT)
RETURNS @NEWTABLE TABLE(Thang INT, SoLuongPhi INT,TongTien INT)
AS
BEGIN
	INSERT INTO @NEWTABLE
	SELECT MONTH(NgayVP) AS Thang, COUNT(*) AS SoLuongVienPhi, SUM(SoTien) AS TongTien
	FROM VienPhi
	WHERE YEAR(NgayVP)=@YEAR
	GROUP BY YEAR(NgayVP), MONTH(NgayVP)

	RETURN
END
--THỰC THI

SELECT * FROM FUNC_Thong_Ke_VP_Thang(2021)

-- XÓA
DROP FUNCTION FUNC_Thong_Ke_VP_Thang

--tạo view từ function
GO
CREATE VIEW ViewVienPhiByMonth AS
SELECT * FROM FUNC_Thong_Ke_VP_Thang(2021);
----------------------------------
--ROLE, USER
--phân quyền
CREATE LOGIN AdminLogin  WITH PASSWORD = 'admin'
CREATE LOGIN BacSiLogin WITH PASSWORD = 'bacsi'
CREATE LOGIN DieuDuongLogin WITH PASSWORD = '1234'

CREATE USER ad FOR LOGIN AdminLogin
CREATE USER bacsi FOR LOGIN BacSiLogin
CREATE USER dieuduong FOR LOGIN DieuDuong

--admin có toàn quyền


-- Phân quyền cho admin (tài khoản người dùng)
GRANT SELECT, INSERT, UPDATE, DELETE ON HoSoBenhAn TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON VienPhi TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON PhieuDangKiKhamBenh TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON HoSoDieuTriNoiTru TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON PhieuXetNghiem TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON PhieuKhamBenh TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON Benh TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON ChiTietPKB TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON BacSi TO ad;
GRANT SELECT, INSERT, UPDATE, DELETE ON Khoa TO ad;

--Phân quyền cho bac si

-- Phân quyền cho các bảng liên quan đến công việc của bác sĩ


GRANT SELECT ON HoSoBenhAn TO bacsi;
GRANT SELECT ON PhieuDangKiKhamBenh TO bacsi;
GRANT SELECT ON HoSoDieuTriNoiTru TO bacsi;
GRANT SELECT ON PhieuKhamBenh TO bacsi;
GRANT SELECT ON Khoa TO bacsi;
GRANT SELECT ON Benh TO bacsi;
GRANT SELECT ON BacSi TO bacsi;
GRANT SELECT, INSERT, UPDATE ON PhieuXetNghiem TO bacsi;
GRANT SELECT, INSERT, UPDATE ON ChiTietPKB TO bacsi;
-- Từ chối quyền truy cập vào các bảng không liên quan
DENY SELECT, INSERT, UPDATE, DELETE ON VienPhi TO bacsi;
DENY INSERT, UPDATE, DELETE ON Benh TO bacsi;
DENY INSERT, UPDATE, DELETE ON BacSi TO bacsi;
DENY INSERT, UPDATE, DELETE ON Khoa TO bacsi;
DENY INSERT, UPDATE, DELETE ON HoSoBenhAn TO bacsi;
DENY INSERT, UPDATE, DELETE ON PhieuDangKiKhamBenh TO bacsi;
DENY INSERT, UPDATE, DELETE ON PhieuKhamBenh TO bacsi;
DENY INSERT, UPDATE, DELETE ON HoSoDieuTriNoiTru TO bacsi;
--kiểm tra
use QL_HSBA
INSERT INTO Khoa VALUES('KN9231', N'Khoa Nội')
delete from khoa where MSKhoa='KN9231'
select * from Khoa

-- Phân quyền cho điều dưỡng (tài khoản người dùng)
GRANT SELECT ON HoSoBenhAn TO dieuduong;
GRANT INSERT, SELECT, UPDATE ON HoSoDieuTriNoiTru TO dieuduong;
GRANT SELECT ON PhieuKhamBenh TO dieuduong;
GRANT SELECT ON PhieuXetNghiem TO dieuduong;
GRANT SELECT ON ChiTietPKB TO dieuduong;
-- Từ chối quyền truy cập vào các bảng không liên quan
DENY INSERT, UPDATE, DELETE ON HoSoBenhAn TO dieuduong;
DENY DELETE ON HoSoDieuTriNoiTru TO dieuduong;
DENY INSERT, UPDATE, DELETE ON PhieuKhamBenh TO dieuduong;
DENY SELECT, INSERT, UPDATE, DELETE ON VienPhi TO dieuduong;
DENY SELECT, INSERT, UPDATE, DELETE ON Benh TO dieuduong;
DENY SELECT, INSERT, UPDATE, DELETE ON BacSi TO dieuduong;
DENY INSERT, UPDATE, DELETE ON PhieuXetNghiem TO dieuduong;
DENY INSERT, UPDATE, DELETE ON ChiTietPKB TO dieuduong;
DENY SELECT, INSERT, UPDATE, DELETE ON Khoa TO dieuduong;
DENY SELECT, INSERT, UPDATE, DELETE ON PhieuDangKiKhamBenh TO dieuduong;
--kiểm tra
